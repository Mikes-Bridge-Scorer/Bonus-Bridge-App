{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mikec\\\\MikesBridge\\\\bonusbridge\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport BridgeGameUI from './BridgeGameUI';\nimport ScoreAdjustment from './components/ScoreAdjustment';\nimport './global.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [gameState, setGameState] = useState(() => {\n    // Try to load game state from local storage\n    const savedState = localStorage.getItem('bridgeGameState');\n    if (savedState) {\n      try {\n        return JSON.parse(savedState);\n      } catch (e) {\n        console.error('Error parsing saved game state', e);\n      }\n    }\n\n    // Default initial state\n    return {\n      gameNumber: 1,\n      dealNumber: 1,\n      scores: {\n        nsScore: 0,\n        ewScore: 0\n      },\n      deals: [],\n      currentDeal: {\n        contract: '',\n        declarer: '',\n        result: null,\n        tricks: null,\n        vulnerable: {\n          ns: false,\n          ew: false\n        }\n      },\n      isAwake: true,\n      showScorePopup: false\n    };\n  });\n\n  // Save game state to local storage whenever it changes\n  useEffect(() => {\n    localStorage.setItem('bridgeGameState', JSON.stringify(gameState));\n  }, [gameState]);\n\n  // Handle saving the score after adjustment\n  const handleSaveScore = scoreData => {\n    setGameState(prev => {\n      // Add the completed deal to the deals history\n      const completedDeal = {\n        ...prev.currentDeal,\n        dealNumber: prev.dealNumber,\n        nsPoints: scoreData.nsPoints,\n        ewPoints: scoreData.ewPoints,\n        details: scoreData.dealDetails\n      };\n      return {\n        ...prev,\n        scores: {\n          nsScore: prev.scores.nsScore + scoreData.nsPoints,\n          ewScore: prev.scores.ewScore + scoreData.ewPoints\n        },\n        deals: [...prev.deals, completedDeal]\n      };\n    });\n  };\n\n  // Handle starting a new deal\n  const handleNextDeal = () => {\n    setGameState(prev => ({\n      ...prev,\n      dealNumber: prev.dealNumber + 1,\n      showScorePopup: false,\n      currentDeal: {\n        contract: '',\n        declarer: '',\n        result: null,\n        tricks: null,\n        vulnerable: determineVulnerability(prev.dealNumber + 1)\n      }\n    }));\n  };\n\n  // Handle starting a new game\n  const handleNewGame = () => {\n    setGameState({\n      gameNumber: gameState.gameNumber + 1,\n      dealNumber: 1,\n      scores: {\n        nsScore: 0,\n        ewScore: 0\n      },\n      deals: [],\n      currentDeal: {\n        contract: '',\n        declarer: '',\n        result: null,\n        tricks: null,\n        vulnerable: determineVulnerability(1)\n      },\n      isAwake: gameState.isAwake,\n      showScorePopup: false\n    });\n  };\n\n  // Determine vulnerability based on deal number\n  // Standard bridge vulnerability rotation: None, NS, EW, Both, repeating\n  const determineVulnerability = dealNumber => {\n    const vulnerabilityPattern = (dealNumber - 1) % 4;\n    switch (vulnerabilityPattern) {\n      case 0:\n        // None\n        return {\n          ns: false,\n          ew: false\n        };\n      case 1:\n        // NS\n        return {\n          ns: true,\n          ew: false\n        };\n      case 2:\n        // EW\n        return {\n          ns: false,\n          ew: true\n        };\n      case 3:\n        // Both\n        return {\n          ns: true,\n          ew: true\n        };\n      default:\n        return {\n          ns: false,\n          ew: false\n        };\n    }\n  };\n\n  // Update the current deal in the game state\n  const updateCurrentDeal = updatedDeal => {\n    setGameState(prev => ({\n      ...prev,\n      currentDeal: {\n        ...prev.currentDeal,\n        ...updatedDeal\n      }\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"app-container\",\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          path: \"/game\",\n          element: /*#__PURE__*/_jsxDEV(BridgeGameUI, {\n            gameState: gameState,\n            updateCurrentDeal: updateCurrentDeal,\n            onNextDeal: () => window.location.href = '/score-adjustment',\n            onNewGame: handleNewGame,\n            setGameState: setGameState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/score-adjustment\",\n          element: /*#__PURE__*/_jsxDEV(ScoreAdjustment, {\n            gameState: gameState,\n            onSaveScore: handleSaveScore,\n            onNextDeal: () => {\n              handleNextDeal();\n              window.location.href = '/game';\n            },\n            onNewGame: () => {\n              handleNewGame();\n              window.location.href = '/game';\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/game\",\n            replace: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"5EVq5gXzdktOjhL9zPqidSWV8NU=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","BridgeGameUI","ScoreAdjustment","jsxDEV","_jsxDEV","App","_s","gameState","setGameState","savedState","localStorage","getItem","JSON","parse","e","console","error","gameNumber","dealNumber","scores","nsScore","ewScore","deals","currentDeal","contract","declarer","result","tricks","vulnerable","ns","ew","isAwake","showScorePopup","setItem","stringify","handleSaveScore","scoreData","prev","completedDeal","nsPoints","ewPoints","details","dealDetails","handleNextDeal","determineVulnerability","handleNewGame","vulnerabilityPattern","updateCurrentDeal","updatedDeal","children","className","path","element","onNextDeal","window","location","href","onNewGame","fileName","_jsxFileName","lineNumber","columnNumber","onSaveScore","to","replace","_c","$RefreshReg$"],"sources":["C:/Users/mikec/MikesBridge/bonusbridge/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport BridgeGameUI from './BridgeGameUI';\r\nimport ScoreAdjustment from './components/ScoreAdjustment';\r\nimport './global.css';\r\n\r\nconst App = () => {\r\n  const [gameState, setGameState] = useState(() => {\r\n    // Try to load game state from local storage\r\n    const savedState = localStorage.getItem('bridgeGameState');\r\n    if (savedState) {\r\n      try {\r\n        return JSON.parse(savedState);\r\n      } catch (e) {\r\n        console.error('Error parsing saved game state', e);\r\n      }\r\n    }\r\n    \r\n    // Default initial state\r\n    return {\r\n      gameNumber: 1,\r\n      dealNumber: 1,\r\n      scores: {\r\n        nsScore: 0,\r\n        ewScore: 0\r\n      },\r\n      deals: [],\r\n      currentDeal: {\r\n        contract: '',\r\n        declarer: '',\r\n        result: null,\r\n        tricks: null,\r\n        vulnerable: {\r\n          ns: false,\r\n          ew: false\r\n        }\r\n      },\r\n      isAwake: true,\r\n      showScorePopup: false\r\n    };\r\n  });\r\n  \r\n  // Save game state to local storage whenever it changes\r\n  useEffect(() => {\r\n    localStorage.setItem('bridgeGameState', JSON.stringify(gameState));\r\n  }, [gameState]);\r\n  \r\n  // Handle saving the score after adjustment\r\n  const handleSaveScore = (scoreData) => {\r\n    setGameState(prev => {\r\n      // Add the completed deal to the deals history\r\n      const completedDeal = {\r\n        ...prev.currentDeal,\r\n        dealNumber: prev.dealNumber,\r\n        nsPoints: scoreData.nsPoints,\r\n        ewPoints: scoreData.ewPoints,\r\n        details: scoreData.dealDetails\r\n      };\r\n      \r\n      return {\r\n        ...prev,\r\n        scores: {\r\n          nsScore: prev.scores.nsScore + scoreData.nsPoints,\r\n          ewScore: prev.scores.ewScore + scoreData.ewPoints\r\n        },\r\n        deals: [...prev.deals, completedDeal]\r\n      };\r\n    });\r\n  };\r\n  \r\n  // Handle starting a new deal\r\n  const handleNextDeal = () => {    \r\n    setGameState(prev => ({\r\n      ...prev,\r\n      dealNumber: prev.dealNumber + 1,\r\n      showScorePopup: false,\r\n      currentDeal: {\r\n        contract: '',\r\n        declarer: '',\r\n        result: null,\r\n        tricks: null,\r\n        vulnerable: determineVulnerability(prev.dealNumber + 1)\r\n      }\r\n    }));\r\n  };\r\n  \r\n  // Handle starting a new game\r\n  const handleNewGame = () => {\r\n    setGameState({\r\n      gameNumber: gameState.gameNumber + 1,\r\n      dealNumber: 1,\r\n      scores: {\r\n        nsScore: 0,\r\n        ewScore: 0\r\n      },\r\n      deals: [],\r\n      currentDeal: {\r\n        contract: '',\r\n        declarer: '',\r\n        result: null,\r\n        tricks: null,\r\n        vulnerable: determineVulnerability(1)\r\n      },\r\n      isAwake: gameState.isAwake,\r\n      showScorePopup: false\r\n    });\r\n  };\r\n  \r\n  // Determine vulnerability based on deal number\r\n  // Standard bridge vulnerability rotation: None, NS, EW, Both, repeating\r\n  const determineVulnerability = (dealNumber) => {\r\n    const vulnerabilityPattern = (dealNumber - 1) % 4;\r\n    \r\n    switch (vulnerabilityPattern) {\r\n      case 0: // None\r\n        return { ns: false, ew: false };\r\n      case 1: // NS\r\n        return { ns: true, ew: false };\r\n      case 2: // EW\r\n        return { ns: false, ew: true };\r\n      case 3: // Both\r\n        return { ns: true, ew: true };\r\n      default:\r\n        return { ns: false, ew: false };\r\n    }\r\n  };\r\n  \r\n  // Update the current deal in the game state\r\n  const updateCurrentDeal = (updatedDeal) => {\r\n    setGameState(prev => ({\r\n      ...prev,\r\n      currentDeal: {\r\n        ...prev.currentDeal,\r\n        ...updatedDeal\r\n      }\r\n    }));\r\n  };\r\n  \r\n  return (\r\n    <Router>\r\n      <div className=\"app-container\">\r\n        <Routes>\r\n          <Route path=\"/game\" element={\r\n            <BridgeGameUI \r\n              gameState={gameState} \r\n              updateCurrentDeal={updateCurrentDeal}\r\n              onNextDeal={() => window.location.href = '/score-adjustment'}\r\n              onNewGame={handleNewGame}\r\n              setGameState={setGameState}\r\n            />\r\n          } />\r\n          \r\n          <Route path=\"/score-adjustment\" element={\r\n            <ScoreAdjustment \r\n              gameState={gameState}\r\n              onSaveScore={handleSaveScore}\r\n              onNextDeal={() => {\r\n                handleNextDeal();\r\n                window.location.href = '/game';\r\n              }}\r\n              onNewGame={() => {\r\n                handleNewGame();\r\n                window.location.href = '/game';\r\n              }}\r\n            />\r\n          } />\r\n          \r\n          <Route path=\"/\" element={<Navigate to=\"/game\" replace />} />\r\n        </Routes>\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,aAAa,IAAIC,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,kBAAkB;AACnF,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,eAAe,MAAM,8BAA8B;AAC1D,OAAO,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEtB,MAAMC,GAAG,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,MAAM;IAC/C;IACA,MAAMe,UAAU,GAAGC,YAAY,CAACC,OAAO,CAAC,iBAAiB,CAAC;IAC1D,IAAIF,UAAU,EAAE;MACd,IAAI;QACF,OAAOG,IAAI,CAACC,KAAK,CAACJ,UAAU,CAAC;MAC/B,CAAC,CAAC,OAAOK,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEF,CAAC,CAAC;MACpD;IACF;;IAEA;IACA,OAAO;MACLG,UAAU,EAAE,CAAC;MACbC,UAAU,EAAE,CAAC;MACbC,MAAM,EAAE;QACNC,OAAO,EAAE,CAAC;QACVC,OAAO,EAAE;MACX,CAAC;MACDC,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE;QACXC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE,EAAE;QACZC,MAAM,EAAE,IAAI;QACZC,MAAM,EAAE,IAAI;QACZC,UAAU,EAAE;UACVC,EAAE,EAAE,KAAK;UACTC,EAAE,EAAE;QACN;MACF,CAAC;MACDC,OAAO,EAAE,IAAI;MACbC,cAAc,EAAE;IAClB,CAAC;EACH,CAAC,CAAC;;EAEF;EACArC,SAAS,CAAC,MAAM;IACde,YAAY,CAACuB,OAAO,CAAC,iBAAiB,EAAErB,IAAI,CAACsB,SAAS,CAAC3B,SAAS,CAAC,CAAC;EACpE,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;;EAEf;EACA,MAAM4B,eAAe,GAAIC,SAAS,IAAK;IACrC5B,YAAY,CAAC6B,IAAI,IAAI;MACnB;MACA,MAAMC,aAAa,GAAG;QACpB,GAAGD,IAAI,CAACd,WAAW;QACnBL,UAAU,EAAEmB,IAAI,CAACnB,UAAU;QAC3BqB,QAAQ,EAAEH,SAAS,CAACG,QAAQ;QAC5BC,QAAQ,EAAEJ,SAAS,CAACI,QAAQ;QAC5BC,OAAO,EAAEL,SAAS,CAACM;MACrB,CAAC;MAED,OAAO;QACL,GAAGL,IAAI;QACPlB,MAAM,EAAE;UACNC,OAAO,EAAEiB,IAAI,CAAClB,MAAM,CAACC,OAAO,GAAGgB,SAAS,CAACG,QAAQ;UACjDlB,OAAO,EAAEgB,IAAI,CAAClB,MAAM,CAACE,OAAO,GAAGe,SAAS,CAACI;QAC3C,CAAC;QACDlB,KAAK,EAAE,CAAC,GAAGe,IAAI,CAACf,KAAK,EAAEgB,aAAa;MACtC,CAAC;IACH,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMK,cAAc,GAAGA,CAAA,KAAM;IAC3BnC,YAAY,CAAC6B,IAAI,KAAK;MACpB,GAAGA,IAAI;MACPnB,UAAU,EAAEmB,IAAI,CAACnB,UAAU,GAAG,CAAC;MAC/Bc,cAAc,EAAE,KAAK;MACrBT,WAAW,EAAE;QACXC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE,EAAE;QACZC,MAAM,EAAE,IAAI;QACZC,MAAM,EAAE,IAAI;QACZC,UAAU,EAAEgB,sBAAsB,CAACP,IAAI,CAACnB,UAAU,GAAG,CAAC;MACxD;IACF,CAAC,CAAC,CAAC;EACL,CAAC;;EAED;EACA,MAAM2B,aAAa,GAAGA,CAAA,KAAM;IAC1BrC,YAAY,CAAC;MACXS,UAAU,EAAEV,SAAS,CAACU,UAAU,GAAG,CAAC;MACpCC,UAAU,EAAE,CAAC;MACbC,MAAM,EAAE;QACNC,OAAO,EAAE,CAAC;QACVC,OAAO,EAAE;MACX,CAAC;MACDC,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE;QACXC,QAAQ,EAAE,EAAE;QACZC,QAAQ,EAAE,EAAE;QACZC,MAAM,EAAE,IAAI;QACZC,MAAM,EAAE,IAAI;QACZC,UAAU,EAAEgB,sBAAsB,CAAC,CAAC;MACtC,CAAC;MACDb,OAAO,EAAExB,SAAS,CAACwB,OAAO;MAC1BC,cAAc,EAAE;IAClB,CAAC,CAAC;EACJ,CAAC;;EAED;EACA;EACA,MAAMY,sBAAsB,GAAI1B,UAAU,IAAK;IAC7C,MAAM4B,oBAAoB,GAAG,CAAC5B,UAAU,GAAG,CAAC,IAAI,CAAC;IAEjD,QAAQ4B,oBAAoB;MAC1B,KAAK,CAAC;QAAE;QACN,OAAO;UAAEjB,EAAE,EAAE,KAAK;UAAEC,EAAE,EAAE;QAAM,CAAC;MACjC,KAAK,CAAC;QAAE;QACN,OAAO;UAAED,EAAE,EAAE,IAAI;UAAEC,EAAE,EAAE;QAAM,CAAC;MAChC,KAAK,CAAC;QAAE;QACN,OAAO;UAAED,EAAE,EAAE,KAAK;UAAEC,EAAE,EAAE;QAAK,CAAC;MAChC,KAAK,CAAC;QAAE;QACN,OAAO;UAAED,EAAE,EAAE,IAAI;UAAEC,EAAE,EAAE;QAAK,CAAC;MAC/B;QACE,OAAO;UAAED,EAAE,EAAE,KAAK;UAAEC,EAAE,EAAE;QAAM,CAAC;IACnC;EACF,CAAC;;EAED;EACA,MAAMiB,iBAAiB,GAAIC,WAAW,IAAK;IACzCxC,YAAY,CAAC6B,IAAI,KAAK;MACpB,GAAGA,IAAI;MACPd,WAAW,EAAE;QACX,GAAGc,IAAI,CAACd,WAAW;QACnB,GAAGyB;MACL;IACF,CAAC,CAAC,CAAC;EACL,CAAC;EAED,oBACE5C,OAAA,CAACP,MAAM;IAAAoD,QAAA,eACL7C,OAAA;MAAK8C,SAAS,EAAC,eAAe;MAAAD,QAAA,eAC5B7C,OAAA,CAACN,MAAM;QAAAmD,QAAA,gBACL7C,OAAA,CAACL,KAAK;UAACoD,IAAI,EAAC,OAAO;UAACC,OAAO,eACzBhD,OAAA,CAACH,YAAY;YACXM,SAAS,EAAEA,SAAU;YACrBwC,iBAAiB,EAAEA,iBAAkB;YACrCM,UAAU,EAAEA,CAAA,KAAMC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,mBAAoB;YAC7DC,SAAS,EAAEZ,aAAc;YACzBrC,YAAY,EAAEA;UAAa;YAAAkD,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC5B;QACF;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAEJzD,OAAA,CAACL,KAAK;UAACoD,IAAI,EAAC,mBAAmB;UAACC,OAAO,eACrChD,OAAA,CAACF,eAAe;YACdK,SAAS,EAAEA,SAAU;YACrBuD,WAAW,EAAE3B,eAAgB;YAC7BkB,UAAU,EAAEA,CAAA,KAAM;cAChBV,cAAc,CAAC,CAAC;cAChBW,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,OAAO;YAChC,CAAE;YACFC,SAAS,EAAEA,CAAA,KAAM;cACfZ,aAAa,CAAC,CAAC;cACfS,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,OAAO;YAChC;UAAE;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH;QACF;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eAEJzD,OAAA,CAACL,KAAK;UAACoD,IAAI,EAAC,GAAG;UAACC,OAAO,eAAEhD,OAAA,CAACJ,QAAQ;YAAC+D,EAAE,EAAC,OAAO;YAACC,OAAO;UAAA;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAE;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtD;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEb,CAAC;AAACvD,EAAA,CAtKID,GAAG;AAAA4D,EAAA,GAAH5D,GAAG;AAwKT,eAAeA,GAAG;AAAC,IAAA4D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}