{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mikec\\\\MikesBridge\\\\bonusbridge\\\\src\\\\components\\\\ScoreTracking.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './ScoreTracking.css';\n\n/**\r\n * Component for displaying and tracking scores in the Bridge game\r\n * @param {Object} props - Component props\r\n * @param {Object} props.scores - Current game scores object\r\n * @param {Object} props.currentDeal - Current deal information\r\n * @param {Function} props.onChooseBonusBridge - Function to handle bonus bridge selection\r\n * @param {Function} props.onChoosePartyBridge - Function to handle party bridge selection\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ScoreTracking = ({\n  scores,\n  currentDeal,\n  onChooseBonusBridge,\n  onChoosePartyBridge\n}) => {\n  _s();\n  // Debug log for incoming props\n  useEffect(() => {\n    console.log('ScoreTracking - Current Scores:', scores);\n    console.log('ScoreTracking - Current Deal:', currentDeal);\n  }, [scores, currentDeal]);\n\n  // Format contract for display\n  const formatContract = () => {\n    if (!currentDeal || !currentDeal.contract) return \"\";\n    const contractMatch = currentDeal.contract.match(/(\\d)([♣♦♥♠]|NT)\\s+([NESW])(X{0,2})/);\n    if (!contractMatch) return currentDeal.contract;\n    const level = contractMatch[1];\n    const suit = contractMatch[2];\n    const declarer = contractMatch[3];\n    const doubled = contractMatch[4] || \"\";\n\n    // Get full declarer name\n    let declarerName = \"\";\n    switch (declarer) {\n      case 'N':\n        declarerName = \"North\";\n        break;\n      case 'E':\n        declarerName = \"East\";\n        break;\n      case 'S':\n        declarerName = \"South\";\n        break;\n      case 'W':\n        declarerName = \"West\";\n        break;\n      default:\n        declarerName = declarer;\n    }\n\n    // Format doubled status\n    let doubledText = \"\";\n    if (doubled === \"X\") {\n      doubledText = \" Doubled\";\n    } else if (doubled === \"XX\") {\n      doubledText = \" Redoubled\";\n    }\n    return `${level}${suit} by ${declarerName}${doubledText}`;\n  };\n\n  // Format result for display\n  const formatResult = () => {\n    if (!currentDeal || currentDeal.result === null || currentDeal.result === undefined) return \"\";\n    const result = currentDeal.result;\n    if (result >= 0) {\n      return result > 0 ? `Made +${result}` : \"Made\";\n    } else {\n      return `Down ${Math.abs(result)}`;\n    }\n  };\n\n  // Calculate score details for display\n  const getScoreDetails = () => {\n    var _currentDeal$vulnerab, _currentDeal$vulnerab2;\n    if (!currentDeal || !currentDeal.contract) return [];\n    const contractMatch = currentDeal.contract.match(/(\\d)([♣♦♥♠]|NT)\\s+([NESW])(X{0,2})/);\n    if (!contractMatch) return [];\n    const level = parseInt(contractMatch[1]);\n    const suit = contractMatch[2];\n    const declarer = contractMatch[3];\n    const doubled = contractMatch[4] || \"\";\n\n    // Determine declarer's team\n    const isNS = declarer === 'N' || declarer === 'S';\n    const team = isNS ? \"NS\" : \"EW\";\n\n    // Determine vulnerability\n    const vulnerable = isNS ? ((_currentDeal$vulnerab = currentDeal.vulnerable) === null || _currentDeal$vulnerab === void 0 ? void 0 : _currentDeal$vulnerab.ns) || false : ((_currentDeal$vulnerab2 = currentDeal.vulnerable) === null || _currentDeal$vulnerab2 === void 0 ? void 0 : _currentDeal$vulnerab2.ew) || false;\n    const vulText = vulnerable ? \"vulnerable\" : \"not vulnerable\";\n\n    // Calculate required tricks and actual tricks\n    const requiredTricks = level + 6;\n    const result = currentDeal.result || 0;\n    const actualTricks = requiredTricks + result;\n\n    // Determine score description\n    const scoringSide = getScoringTeam();\n    let scoreAmount = 0;\n\n    // Calculate the score amount based on which team is scoring\n    if (scoringSide === \"NS\") {\n      scoreAmount = Math.abs(currentDeal.nsPoints || 0);\n    } else {\n      scoreAmount = Math.abs(currentDeal.ewPoints || 0);\n    }\n\n    // If score amount is still 0, use the raw score\n    if (scoreAmount === 0) {\n      scoreAmount = Math.abs(currentDeal.rawScore || 0);\n    }\n\n    // Format the calculation steps\n    return [`Contract: ${level}${suit} by ${team} (${vulText})`, `Required tricks: ${level} + 6 = ${requiredTricks}`, `Actual tricks: ${actualTricks}`, result >= 0 ? `Total: ${scoreAmount} points to ${scoringSide}` : `Undertricks (${Math.abs(result)}): ${scoreAmount} points to ${scoringSide}`];\n  };\n\n  // Get the side that scores (NS or EW)\n  const getScoringTeam = () => {\n    if (!currentDeal || !currentDeal.contract) return \"NS\";\n    const contractMatch = currentDeal.contract.match(/(\\d)([♣♦♥♠]|NT)\\s+([NESW])(X{0,2})/);\n    if (!contractMatch) return \"NS\";\n    const declarer = contractMatch[3];\n    const isNS = declarer === 'N' || declarer === 'S';\n    const result = currentDeal.result || 0;\n\n    // If made contract, declarer's side scores\n    // If defeated, defenders score\n    if (result >= 0) {\n      return isNS ? \"NS\" : \"EW\";\n    } else {\n      return isNS ? \"EW\" : \"NS\";\n    }\n  };\n\n  // Get display score for a team - shows Party Bridge OR Bonus Bridge scores\n  const getDisplayScore = team => {\n    // Check if we're showing bonus scores or standard party bridge scores\n    const showingBonusScores = scores.showBonusScores || false;\n\n    // If it's a fresh deal with no contract yet, show 0\n    if (!currentDeal || !currentDeal.contract) return 0;\n\n    // FIXED: Directly access the scores from currentDeal first with fallbacks\n    if (team === 'NS') {\n      // For North-South\n      if (showingBonusScores) {\n        // Bonus Bridge scoring\n        return currentDeal.bonusNsPoints || scores.bonusNsPoints || 0;\n      } else {\n        // Party Bridge (standard) scoring\n        return currentDeal.nsPoints || scores.nsPoints || 0;\n      }\n    } else {\n      // For East-West\n      if (showingBonusScores) {\n        // Bonus Bridge scoring\n        return currentDeal.bonusEwPoints || scores.bonusEwPoints || 0;\n      } else {\n        // Party Bridge (standard) scoring\n        return currentDeal.ewPoints || scores.ewPoints || 0;\n      }\n    }\n  };\n\n  // Format running total scores properly\n  const formatTotal = team => {\n    if (!scores) return 0;\n\n    // Check if we're showing bonus scores or standard party bridge scores\n    const showingBonusScores = scores.showBonusScores || false;\n\n    // Choose which total to show based on the flag\n    let total;\n    if (showingBonusScores) {\n      // Show Bonus Bridge totals\n      total = team === 'NS' ? scores.bonusNsTotal : scores.bonusEwTotal;\n    } else {\n      // Show Party Bridge totals (standard)\n      total = team === 'NS' ? scores.nsTotal : scores.ewTotal;\n    }\n\n    // FIXED: Handle edge cases\n    if (total === undefined || total === null) {\n      console.warn(`Running total for ${team} is undefined or null`);\n      return 0;\n    }\n    if (typeof total === 'object') {\n      // Handle case where score is incorrectly an object\n      console.warn(`Running total for ${team} is an object instead of a number`, total);\n      return 0;\n    }\n\n    // Make sure we're returning a number\n    return parseInt(total) || 0;\n  };\n\n  // Determine if we show contract info or not\n  const shouldShowContractInfo = () => {\n    // FIXED: Show contract info if there's a contract regardless of deal number\n    return currentDeal && currentDeal.contract;\n  };\n\n  // Determine if we show scoring options\n  const shouldShowScoringOptions = () => {\n    // Only show scoring options if we have a contract and result\n    return currentDeal && currentDeal.contract && currentDeal.result !== null && currentDeal.result !== undefined && !scores.showBonusScores; // Don't show if already in bonus mode\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"score-tracking\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Score Summary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"score-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Team\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"This Deal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Running Total\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: \"North-South\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: getDisplayScore('NS')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: formatTotal('NS')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: \"East-West\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: getDisplayScore('EW')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: formatTotal('EW')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), shouldShowContractInfo() && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"contract-summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Contract:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 13\n        }, this), \" \", formatContract(), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Result:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 13\n        }, this), \" \", formatResult()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"score-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Score Calculation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: getScoreDetails().map((detail, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            children: detail\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this), shouldShowScoringOptions() && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"scoring-options\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"bonus-bridge-btn\",\n        onClick: onChooseBonusBridge,\n        children: \"Bonus Bridge Score Adjustments (recommended)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"party-bridge-btn\",\n        onClick: onChoosePartyBridge,\n        children: \"Skip Adjustment (Party Bridge scoring)\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 219,\n    columnNumber: 5\n  }, this);\n};\n_s(ScoreTracking, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = ScoreTracking;\nexport default ScoreTracking;\nvar _c;\n$RefreshReg$(_c, \"ScoreTracking\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","ScoreTracking","scores","currentDeal","onChooseBonusBridge","onChoosePartyBridge","_s","console","log","formatContract","contract","contractMatch","match","level","suit","declarer","doubled","declarerName","doubledText","formatResult","result","undefined","Math","abs","getScoreDetails","_currentDeal$vulnerab","_currentDeal$vulnerab2","parseInt","isNS","team","vulnerable","ns","ew","vulText","requiredTricks","actualTricks","scoringSide","getScoringTeam","scoreAmount","nsPoints","ewPoints","rawScore","getDisplayScore","showingBonusScores","showBonusScores","bonusNsPoints","bonusEwPoints","formatTotal","total","bonusNsTotal","bonusEwTotal","nsTotal","ewTotal","warn","shouldShowContractInfo","shouldShowScoringOptions","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","detail","index","onClick","_c","$RefreshReg$"],"sources":["C:/Users/mikec/MikesBridge/bonusbridge/src/components/ScoreTracking.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './ScoreTracking.css';\r\n\r\n/**\r\n * Component for displaying and tracking scores in the Bridge game\r\n * @param {Object} props - Component props\r\n * @param {Object} props.scores - Current game scores object\r\n * @param {Object} props.currentDeal - Current deal information\r\n * @param {Function} props.onChooseBonusBridge - Function to handle bonus bridge selection\r\n * @param {Function} props.onChoosePartyBridge - Function to handle party bridge selection\r\n */\r\nconst ScoreTracking = ({ scores, currentDeal, onChooseBonusBridge, onChoosePartyBridge }) => {\r\n  // Debug log for incoming props\r\n  useEffect(() => {\r\n    console.log('ScoreTracking - Current Scores:', scores);\r\n    console.log('ScoreTracking - Current Deal:', currentDeal);\r\n  }, [scores, currentDeal]);\r\n  \r\n  // Format contract for display\r\n  const formatContract = () => {\r\n    if (!currentDeal || !currentDeal.contract) return \"\";\r\n    \r\n    const contractMatch = currentDeal.contract.match(/(\\d)([♣♦♥♠]|NT)\\s+([NESW])(X{0,2})/);\r\n    if (!contractMatch) return currentDeal.contract;\r\n    \r\n    const level = contractMatch[1];\r\n    const suit = contractMatch[2];\r\n    const declarer = contractMatch[3];\r\n    const doubled = contractMatch[4] || \"\";\r\n    \r\n    // Get full declarer name\r\n    let declarerName = \"\";\r\n    switch (declarer) {\r\n      case 'N': declarerName = \"North\"; break;\r\n      case 'E': declarerName = \"East\"; break;\r\n      case 'S': declarerName = \"South\"; break;\r\n      case 'W': declarerName = \"West\"; break;\r\n      default: declarerName = declarer;\r\n    }\r\n    \r\n    // Format doubled status\r\n    let doubledText = \"\";\r\n    if (doubled === \"X\") {\r\n      doubledText = \" Doubled\";\r\n    } else if (doubled === \"XX\") {\r\n      doubledText = \" Redoubled\";\r\n    }\r\n    \r\n    return `${level}${suit} by ${declarerName}${doubledText}`;\r\n  };\r\n  \r\n  // Format result for display\r\n  const formatResult = () => {\r\n    if (!currentDeal || currentDeal.result === null || currentDeal.result === undefined) return \"\";\r\n    \r\n    const result = currentDeal.result;\r\n    if (result >= 0) {\r\n      return result > 0 ? `Made +${result}` : \"Made\";\r\n    } else {\r\n      return `Down ${Math.abs(result)}`;\r\n    }\r\n  };\r\n  \r\n  // Calculate score details for display\r\n  const getScoreDetails = () => {\r\n    if (!currentDeal || !currentDeal.contract) return [];\r\n    \r\n    const contractMatch = currentDeal.contract.match(/(\\d)([♣♦♥♠]|NT)\\s+([NESW])(X{0,2})/);\r\n    if (!contractMatch) return [];\r\n    \r\n    const level = parseInt(contractMatch[1]);\r\n    const suit = contractMatch[2];\r\n    const declarer = contractMatch[3];\r\n    const doubled = contractMatch[4] || \"\";\r\n    \r\n    // Determine declarer's team\r\n    const isNS = declarer === 'N' || declarer === 'S';\r\n    const team = isNS ? \"NS\" : \"EW\";\r\n    \r\n    // Determine vulnerability\r\n    const vulnerable = isNS ? \r\n      (currentDeal.vulnerable?.ns || false) : \r\n      (currentDeal.vulnerable?.ew || false);\r\n    \r\n    const vulText = vulnerable ? \"vulnerable\" : \"not vulnerable\";\r\n    \r\n    // Calculate required tricks and actual tricks\r\n    const requiredTricks = level + 6;\r\n    const result = currentDeal.result || 0;\r\n    const actualTricks = requiredTricks + result;\r\n    \r\n    // Determine score description\r\n    const scoringSide = getScoringTeam();\r\n    let scoreAmount = 0;\r\n    \r\n    // Calculate the score amount based on which team is scoring\r\n    if (scoringSide === \"NS\") {\r\n      scoreAmount = Math.abs(currentDeal.nsPoints || 0);\r\n    } else {\r\n      scoreAmount = Math.abs(currentDeal.ewPoints || 0);\r\n    }\r\n    \r\n    // If score amount is still 0, use the raw score\r\n    if (scoreAmount === 0) {\r\n      scoreAmount = Math.abs(currentDeal.rawScore || 0);\r\n    }\r\n    \r\n    // Format the calculation steps\r\n    return [\r\n      `Contract: ${level}${suit} by ${team} (${vulText})`,\r\n      `Required tricks: ${level} + 6 = ${requiredTricks}`,\r\n      `Actual tricks: ${actualTricks}`,\r\n      result >= 0 ? \r\n        `Total: ${scoreAmount} points to ${scoringSide}` : \r\n        `Undertricks (${Math.abs(result)}): ${scoreAmount} points to ${scoringSide}`\r\n    ];\r\n  };\r\n\r\n  // Get the side that scores (NS or EW)\r\n  const getScoringTeam = () => {\r\n    if (!currentDeal || !currentDeal.contract) return \"NS\";\r\n    \r\n    const contractMatch = currentDeal.contract.match(/(\\d)([♣♦♥♠]|NT)\\s+([NESW])(X{0,2})/);\r\n    if (!contractMatch) return \"NS\";\r\n    \r\n    const declarer = contractMatch[3];\r\n    const isNS = declarer === 'N' || declarer === 'S';\r\n    const result = currentDeal.result || 0;\r\n    \r\n    // If made contract, declarer's side scores\r\n    // If defeated, defenders score\r\n    if (result >= 0) {\r\n      return isNS ? \"NS\" : \"EW\";\r\n    } else {\r\n      return isNS ? \"EW\" : \"NS\";\r\n    }\r\n  };\r\n  \r\n  // Get display score for a team - shows Party Bridge OR Bonus Bridge scores\r\n  const getDisplayScore = (team) => {\r\n    // Check if we're showing bonus scores or standard party bridge scores\r\n    const showingBonusScores = scores.showBonusScores || false;\r\n    \r\n    // If it's a fresh deal with no contract yet, show 0\r\n    if (!currentDeal || !currentDeal.contract) return 0;\r\n    \r\n    // FIXED: Directly access the scores from currentDeal first with fallbacks\r\n    if (team === 'NS') {\r\n      // For North-South\r\n      if (showingBonusScores) {\r\n        // Bonus Bridge scoring\r\n        return currentDeal.bonusNsPoints || scores.bonusNsPoints || 0;\r\n      } else {\r\n        // Party Bridge (standard) scoring\r\n        return currentDeal.nsPoints || scores.nsPoints || 0;\r\n      }\r\n    } else {\r\n      // For East-West\r\n      if (showingBonusScores) {\r\n        // Bonus Bridge scoring\r\n        return currentDeal.bonusEwPoints || scores.bonusEwPoints || 0;\r\n      } else {\r\n        // Party Bridge (standard) scoring\r\n        return currentDeal.ewPoints || scores.ewPoints || 0;\r\n      }\r\n    }\r\n  };\r\n  \r\n  // Format running total scores properly\r\n  const formatTotal = (team) => {\r\n    if (!scores) return 0;\r\n    \r\n    // Check if we're showing bonus scores or standard party bridge scores\r\n    const showingBonusScores = scores.showBonusScores || false;\r\n    \r\n    // Choose which total to show based on the flag\r\n    let total;\r\n    if (showingBonusScores) {\r\n      // Show Bonus Bridge totals\r\n      total = team === 'NS' ? scores.bonusNsTotal : scores.bonusEwTotal;\r\n    } else {\r\n      // Show Party Bridge totals (standard)\r\n      total = team === 'NS' ? scores.nsTotal : scores.ewTotal;\r\n    }\r\n    \r\n    // FIXED: Handle edge cases\r\n    if (total === undefined || total === null) {\r\n      console.warn(`Running total for ${team} is undefined or null`);\r\n      return 0;\r\n    }\r\n    \r\n    if (typeof total === 'object') {\r\n      // Handle case where score is incorrectly an object\r\n      console.warn(`Running total for ${team} is an object instead of a number`, total);\r\n      return 0;\r\n    }\r\n    \r\n    // Make sure we're returning a number\r\n    return parseInt(total) || 0;\r\n  };\r\n  \r\n  // Determine if we show contract info or not\r\n  const shouldShowContractInfo = () => {\r\n    // FIXED: Show contract info if there's a contract regardless of deal number\r\n    return currentDeal && currentDeal.contract;\r\n  };\r\n  \r\n  // Determine if we show scoring options\r\n  const shouldShowScoringOptions = () => {\r\n    // Only show scoring options if we have a contract and result\r\n    return currentDeal && \r\n           currentDeal.contract && \r\n           currentDeal.result !== null && \r\n           currentDeal.result !== undefined &&\r\n           !scores.showBonusScores; // Don't show if already in bonus mode\r\n  };\r\n  \r\n  return (\r\n    <div className=\"score-tracking\">\r\n      <h3>Score Summary</h3>\r\n      \r\n      <table className=\"score-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Team</th>\r\n            <th>This Deal</th>\r\n            <th>Running Total</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>North-South</td>\r\n            <td>{getDisplayScore('NS')}</td>\r\n            <td>{formatTotal('NS')}</td>\r\n          </tr>\r\n          <tr>\r\n            <td>East-West</td>\r\n            <td>{getDisplayScore('EW')}</td>\r\n            <td>{formatTotal('EW')}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n      \r\n      {shouldShowContractInfo() && (\r\n        <div className=\"contract-summary\">\r\n          <p>\r\n            <strong>Contract:</strong> {formatContract()}\r\n            <br />\r\n            <strong>Result:</strong> {formatResult()}\r\n          </p>\r\n          \r\n          {/* FIXED: Removed the toggle button and always show score details */}\r\n          <div className=\"score-details\">\r\n            <h4>Score Calculation</h4>\r\n            <ul>\r\n              {getScoreDetails().map((detail, index) => (\r\n                <li key={index}>{detail}</li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {shouldShowScoringOptions() && (\r\n        <div className=\"scoring-options\">\r\n          <button \r\n            className=\"bonus-bridge-btn\"\r\n            onClick={onChooseBonusBridge}\r\n          >\r\n            Bonus Bridge Score Adjustments (recommended)\r\n          </button>\r\n          \r\n          <button \r\n            className=\"party-bridge-btn\"\r\n            onClick={onChoosePartyBridge}\r\n          >\r\n            Skip Adjustment (Party Bridge scoring)\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScoreTracking;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}